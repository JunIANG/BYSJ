{"remainingRequest":"D:\\毕业设计\\Online-Travel\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\毕业设计\\Online-Travel\\online-travel-view\\src\\views\\admin\\Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\毕业设计\\Online-Travel\\online-travel-view\\src\\views\\admin\\Main.vue","mtime":1743958626877},{"path":"D:\\毕业设计\\Online-Travel\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\毕业设计\\Online-Travel\\online-travel-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\毕业设计\\Online-Travel\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\毕业设计\\Online-Travel\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTGluZUNoYXJ0IGZyb20gIkAvY29tcG9uZW50cy9MaW5lQ2hhcnQiDQppbXBvcnQgeyB0aW1lQWdvIH0gZnJvbSAiQC91dGlscy9kYXRhIg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGNvbXBvbmVudHM6IHsgTGluZUNoYXJ0IH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHN0YXRpY0RhdGE6IFtdLA0KICAgICAgICAgICAgc2NlbmljU3RyYXRlZ2llczogW10sDQogICAgICAgICAgICB0aWNrZXRNb25leVZhbHVlczogW10sDQogICAgICAgICAgICB0aWNrZXRNb25leURhdGVzOiBbXSwNCiAgICAgICAgICAgIGhvdGVsUm9vbU1vbmV5VmFsdWVzOiBbXSwNCiAgICAgICAgICAgIGhvdGVsUm9vbU1vbmV5RGF0ZXM6IFtdLA0KICAgICAgICAgICAgZGVmYXVsdFF1ZXJ5RGF5czogMzY1LCAvLyDnlLHkuo7mlbDmja7lpKrlsJHvvIznm7TmjqXmn6XkuIDlubTmnaXmtYvor5UNCiAgICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy5mZW50Y2hTdGF0aWNDb3VudCgpOw0KICAgICAgICB0aGlzLmZlbnRjaFN0cmF0ZWd5KCk7DQogICAgICAgIHRoaXMudGlja2V0U2VsZWN0ZWQodGhpcy5kZWZhdWx0UXVlcnlEYXlzKTsNCiAgICAgICAgdGhpcy5ob3RlbE9yZGVyU2VsZWN0ZWQodGhpcy5kZWZhdWx0UXVlcnlEYXlzKTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgdGltZU91dCh0aW1lKSB7DQogICAgICAgICAgICByZXR1cm4gdGltZUFnbyh0aW1lKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8g5p+l6K+i5oyH5a6a5pe26Ze05YaF55qE6Zeo56Wo6ZSA5ZSu6aKd6K6w5b2VDQogICAgICAgIGhvdGVsT3JkZXJTZWxlY3RlZChkYXkpIHsNCiAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldChgL2hvdGVsT3JkZXJJbmZvL2RheXNRdWVyeU1vbmV5LyR7ZGF5fWApLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIOWPquWPluWHuumHjOmdoueahOmHkemine+8jOiHquaIkOS4gOS4quaVsOe7hA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmhvdGVsUm9vbU1vbmV5VmFsdWVzID0gcmVzLmRhdGEuZGF0YS5tYXAobW9uZXkgPT4gbW9uZXkuY291bnQpOw0KICAgICAgICAgICAgICAgICAgICAvLyDlj6rlj5blh7rph4zpnaLnmoTml6XmnJ/vvIzoh6rmiJDkuIDkuKrmlbDnu4QNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3RlbFJvb21Nb25leURhdGVzID0gcmVzLmRhdGEuZGF0YS5tYXAobW9uZXkgPT4gbW9uZXkubmFtZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIC8vIOafpeivouaMh+WumuaXtumXtOWGheeahOmXqOelqOmUgOWUrumineiusOW9lQ0KICAgICAgICB0aWNrZXRTZWxlY3RlZChkYXkpIHsNCiAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldChgL3NjZW5pY1RpY2tldE9yZGVyL2RheXNRdWVyeU1vbmV5LyR7ZGF5fWApLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIOWPquWPluWHuumHjOmdoueahOmHkemine+8jOiHquaIkOS4gOS4quaVsOe7hA0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRpY2tldE1vbmV5VmFsdWVzID0gcmVzLmRhdGEuZGF0YS5tYXAobW9uZXkgPT4gbW9uZXkuY291bnQpOw0KICAgICAgICAgICAgICAgICAgICAvLyDlj6rlj5blh7rph4zpnaLnmoTml6XmnJ/vvIzoh6rmiJDkuIDkuKrmlbDnu4QNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50aWNrZXRNb25leURhdGVzID0gcmVzLmRhdGEuZGF0YS5tYXAobW9uZXkgPT4gbW9uZXkubmFtZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIHJlYWRTdHJhdGVneShzdHJhdGVneSkgew0KICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnc3RyYXRlZ3lJZCcsIHN0cmF0ZWd5LmlkKTsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvc2VlU3RyYXRlZ3lEZXRhaWwnKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8g5p+l6K+i5pyA5paw5Y+R5biD55qE5pS755Wl5pWw5o2uDQogICAgICAgIGZlbnRjaFN0cmF0ZWd5KCkgew0KICAgICAgICAgICAgY29uc3Qgc3RyYXRlZ3lRdWVyeSA9IHsNCiAgICAgICAgICAgICAgICBjdXJyZW50OiAxLA0KICAgICAgICAgICAgICAgIHNpemU6IDUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy9zY2VuaWNTdHJhdGVneS9xdWVyeUxpc3QnLCBzdHJhdGVneVF1ZXJ5KS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5pY1N0cmF0ZWdpZXMgPSByZXMuZGF0YS5kYXRhOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICAvLyDmn6Xor6LpnZnmgIHmlbDmja4NCiAgICAgICAgZmVudGNoU3RhdGljQ291bnQoKSB7DQogICAgICAgICAgICB0aGlzLiRheGlvcy5nZXQoJy92aWV3cy9zdGF0aWNDb250cm9scycpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGljRGF0YSA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgfSwNCn07DQo="},{"version":3,"sources":["Main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Main.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n    <div style=\"box-sizing: border-box;overflow-y: hidden;overflow-x: hidden;\">\r\n        <el-row>\r\n            <el-col :span=\"16\">\r\n                <div>\r\n                    <div>\r\n                        <el-row style=\"margin-block: 20px;\">\r\n                            <el-col :span=\"4\" v-for=\"(staticItem, index) in staticData\" :key=\"index\">\r\n                                <div class=\"static-item\">\r\n                                    <el-statistic group-separator=\",\" :precision=\"0\" :value=\"staticItem.count\"\r\n                                        :title=\"staticItem.name\"></el-statistic>\r\n                                </div>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </div>\r\n                    <div>\r\n                        <div style=\"padding: 20px 60px;box-sizing: border-box;\">\r\n                            <LineChart height=\"280px\" tag=\"门票销售额\" @on-selected=\"ticketSelected\"\r\n                                :values=\"ticketMoneyValues\" :date=\"ticketMoneyDates\" />\r\n                        </div>\r\n                        <div style=\"padding: 20px 60px;box-sizing: border-box;\">\r\n                            <LineChart height=\"280px\" tag=\"酒店销售额\" @on-selected=\"hotelOrderSelected\"\r\n                                :values=\"hotelRoomMoneyValues\" :date=\"hotelRoomMoneyDates\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n                <div class=\"buttom\">\r\n                    <p>最新攻略</p>\r\n                    <div class=\"strategy-item\" v-for=\"(strategy, index) in scenicStrategies\" :key=\"index\">\r\n                        <div class=\"left\">\r\n                            <img :src=\"strategy.cover\" :alt=\"strategy.title\" srcset=\"\">\r\n                        </div>\r\n                        <div class=\"right\">\r\n                            <div class=\"user\">\r\n                                <img :src=\"strategy.userAvatar\" alt=\"\" srcset=\"\">\r\n                                <span>{{ strategy.userName }}</span>\r\n                            </div>\r\n                            <div class=\"title\" @click=\"readStrategy(strategy)\">{{ strategy.title }}</div>\r\n                            <div class=\"info\">\r\n                                <span>{{ strategy.scenicName }}</span>\r\n                                <span>{{ timeOut(strategy.createTime) }}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n<script>\r\nimport LineChart from \"@/components/LineChart\"\r\nimport { timeAgo } from \"@/utils/data\"\r\nexport default {\r\n    components: { LineChart },\r\n    data() {\r\n        return {\r\n            staticData: [],\r\n            scenicStrategies: [],\r\n            ticketMoneyValues: [],\r\n            ticketMoneyDates: [],\r\n            hotelRoomMoneyValues: [],\r\n            hotelRoomMoneyDates: [],\r\n            defaultQueryDays: 365, // 由于数据太少，直接查一年来测试\r\n        }\r\n    },\r\n    created() {\r\n        this.fentchStaticCount();\r\n        this.fentchStrategy();\r\n        this.ticketSelected(this.defaultQueryDays);\r\n        this.hotelOrderSelected(this.defaultQueryDays);\r\n    },\r\n    methods: {\r\n        timeOut(time) {\r\n            return timeAgo(time);\r\n        },\r\n        // 查询指定时间内的门票销售额记录\r\n        hotelOrderSelected(day) {\r\n            this.$axios.get(`/hotelOrderInfo/daysQueryMoney/${day}`).then(res => {\r\n                if (res.data.code === 200) {\r\n                    // 只取出里面的金额，自成一个数组\r\n                    this.hotelRoomMoneyValues = res.data.data.map(money => money.count);\r\n                    // 只取出里面的日期，自成一个数组\r\n                    this.hotelRoomMoneyDates = res.data.data.map(money => money.name);\r\n                }\r\n            });\r\n        },\r\n        // 查询指定时间内的门票销售额记录\r\n        ticketSelected(day) {\r\n            this.$axios.get(`/scenicTicketOrder/daysQueryMoney/${day}`).then(res => {\r\n                if (res.data.code === 200) {\r\n                    // 只取出里面的金额，自成一个数组\r\n                    this.ticketMoneyValues = res.data.data.map(money => money.count);\r\n                    // 只取出里面的日期，自成一个数组\r\n                    this.ticketMoneyDates = res.data.data.map(money => money.name);\r\n                }\r\n            });\r\n        },\r\n        readStrategy(strategy) {\r\n            sessionStorage.setItem('strategyId', strategy.id);\r\n            this.$router.push('/seeStrategyDetail');\r\n        },\r\n        // 查询最新发布的攻略数据\r\n        fentchStrategy() {\r\n            const strategyQuery = {\r\n                current: 1,\r\n                size: 5\r\n            }\r\n            this.$axios.post('/scenicStrategy/queryList', strategyQuery).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.scenicStrategies = res.data.data;\r\n                }\r\n            });\r\n        },\r\n        // 查询静态数据\r\n        fentchStaticCount() {\r\n            this.$axios.get('/views/staticControls').then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.staticData = res.data.data;\r\n                }\r\n            });\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.buttom {\r\n    padding: 5px 20px;\r\n    box-sizing: border-box;\r\n\r\n    .strategy-item {\r\n        display: flex;\r\n        justify-content: left;\r\n        padding: 10px 0;\r\n        cursor: pointer;\r\n\r\n        .left {\r\n            padding: 5px;\r\n            box-sizing: border-box;\r\n\r\n            img {\r\n                width: 138px;\r\n                height: 80px;\r\n                border-radius: 5px;\r\n            }\r\n        }\r\n\r\n        .right {\r\n            padding: 5px;\r\n            box-sizing: border-box;\r\n\r\n            .user {\r\n                display: flex;\r\n                justify-content: left;\r\n                align-items: center;\r\n                margin-block: 4px;\r\n\r\n                img {\r\n                    width: 20px;\r\n                    height: 20px;\r\n                    border-radius: 10px;\r\n                }\r\n\r\n                span {\r\n                    margin-left: 4px;\r\n                    font-size: 14px;\r\n                }\r\n            }\r\n\r\n            .title {\r\n                font-size: 20px;\r\n                width: 100px;\r\n                font-weight: 800;\r\n                padding-bottom: 6px;\r\n                white-space: nowrap;\r\n                margin-top: 3px;\r\n                /* 防止文本换行 */\r\n                overflow: hidden;\r\n                /* 隐藏超出容器的文本 */\r\n                text-overflow: ellipsis;\r\n                /* 使用省略号表示被截断的文本 */\r\n            }\r\n\r\n            .title:hover {\r\n                text-decoration: underline;\r\n                text-decoration-style: dashed;\r\n            }\r\n\r\n            .detail {\r\n                font-size: 14px;\r\n                color: rgb(131, 130, 130);\r\n            }\r\n\r\n            .info {\r\n                font-size: 12px;\r\n                margin-top: 3px;\r\n                display: flex;\r\n                justify-content: left;\r\n                gap: 10px;\r\n\r\n                span:first-child {\r\n                    display: inline-block;\r\n                    padding: 1px 3px;\r\n                    border-radius: 2px;\r\n                    background-color: rgb(237, 243, 249);\r\n                    color: rgb(136, 115, 233);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n</style>"]}]}