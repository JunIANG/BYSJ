{"remainingRequest":"D:\\毕业设计\\Online-Travel\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\毕业设计\\Online-Travel\\online-travel-view\\src\\views\\user\\Bed.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\毕业设计\\Online-Travel\\online-travel-view\\src\\views\\user\\Bed.vue","mtime":1731388422000},{"path":"D:\\毕业设计\\Online-Travel\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\毕业设计\\Online-Travel\\online-travel-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\毕业设计\\Online-Travel\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\毕业设计\\Online-Travel\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgcHJvcHM6IHsNCiAgICAgICAgcm9vbUlkOiB7DQogICAgICAgICAgICB0eXBlOiBOdW1iZXIsDQogICAgICAgICAgICBkZWZhdWx0OiAnJw0KICAgICAgICB9LA0KICAgIH0sDQogICAgd2F0Y2g6IHsNCiAgICAgICAgcm9vbUlkKHYxLCB2Mikgew0KICAgICAgICAgICAgY29uc29sZS5sb2coIuaIv+mXtElE77yaIiAsdjEpOw0KICAgICAgICAgICAgdGhpcy5mZXRjaEJlZHModjEpOw0KICAgICAgICB9LA0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGRhdGE6IHt9LA0KICAgICAgICAgICAgYmVkczogW10sDQogICAgICAgICAgICBiZWRPcGVyYWlvbjogZmFsc2UsIC8vIOaOp+WItuW6iuS9jeaWsOWini/nvJbovpHnmoTlvIDlhbPlj5jph48NCiAgICAgICAgICAgIGlzT3BlcmF0aW9uOiBmYWxzZSwgLy8gZmFsc2U6IOaWsOWinu+8m3RydWXvvJog5L+u5pS5DQogICAgICAgIH0NCiAgICB9LA0KICAgIGNyZWF0ZWQoKSB7DQogICAgICAgIHRoaXMuZmV0Y2hCZWRzKCk7DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGFzeW5jIGRlbGV0ZUJlZChiZWQpIHsNCiAgICAgICAgICAgIGxldCBpZHMgPSBbYmVkLmlkXQ0KICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KGAvaG90ZWxSb29tQmVkL2JhdGNoRGVsZXRlYCwgaWRzKTsNCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuY2FubmVsKCk7DQogICAgICAgICAgICAgICAgdGhpcy5mZXRjaEJlZHMoKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGNyZWF0ZUJlZCgpIHsNCiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHt9Ow0KICAgICAgICAgICAgdGhpcy5iZWRPcGVyYWlvbiA9IHRydWU7DQogICAgICAgIH0sDQogICAgICAgIHVwZGF0ZUJlZEluZm8oYmVkKSB7DQogICAgICAgICAgICB0aGlzLmRhdGEgPSBiZWQ7DQogICAgICAgICAgICB0aGlzLmJlZE9wZXJhaW9uID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMuaXNPcGVyYXRpb24gPSB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICAvLyDluorkvY3mlrDlop4NCiAgICAgICAgYWRkT3BlcmF0aW9uKCkgew0KICAgICAgICAgICAgY29uc3QgaG90ZWxSb29tQmVkID0gew0KICAgICAgICAgICAgICAgIHJvb21JZDogdGhpcy5yb29tSWQsDQogICAgICAgICAgICAgICAgLi4udGhpcy5kYXRhDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCcvaG90ZWxSb29tQmVkL3NhdmUnLCBob3RlbFJvb21CZWQpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIOWFs+mXreaTjeS9nOWMuuWfnw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmJlZE9wZXJhaW9uID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5bqK5L2N5paw5aKe5oiQ5YqfJyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hCZWRzKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuafpeivouW6iuS9jeS/oeaBr+W8guW4uDoiLCBlcnJvcik7DQoNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8vIOW6iuS9jeS/ruaUuQ0KICAgICAgICB1cGRhdGVPcGVyYXRpb24oKSB7DQogICAgICAgICAgICB0aGlzLiRheGlvcy5wdXQoJy9ob3RlbFJvb21CZWQvdXBkYXRlJywgdGhpcy5kYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICAvLyDlhbPpl63mk43kvZzljLrln58NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWRPcGVyYWlvbiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmlzT3BlcmF0aW9uID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5bqK5L2N5L+u5pS55oiQ5YqfJyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hCZWRzKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuafpeivouW6iuS9jeS/oeaBr+W8guW4uDoiLCBlcnJvcik7DQoNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8vIOWPlua2iOS6i+S7tg0KICAgICAgICBjYW5uZWwoKSB7DQogICAgICAgICAgICB0aGlzLmRhdGEgPSB7fTsNCiAgICAgICAgICAgIHRoaXMuYmVkT3BlcmFpb24gPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMuaXNPcGVyYXRpb24gPSBmYWxzZTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8g5Yqg6L295a+55bqU55qE5bqK5L2N5L+h5oGvDQogICAgICAgIGZldGNoQmVkcygpIHsNCiAgICAgICAgICAgIGNvbnN0IGhvdGVsUm9vbUJlZFF1ZXJ5RHRvID0gew0KICAgICAgICAgICAgICAgIHJvb21JZDogdGhpcy5yb29tSWQNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy9ob3RlbFJvb21CZWQvcXVlcnknLCBob3RlbFJvb21CZWRRdWVyeUR0bykudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWRzID0gcmVzLmRhdGEuZGF0YTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigi5p+l6K+i5bqK5L2N5L+h5oGv5byC5bi4OiIsIGVycm9yKTsNCg0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICB9LA0KfTsNCg=="},{"version":3,"sources":["Bed.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Bed.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n    <div>\r\n        <div v-if=\"bedOperaion\" style=\"padding: 20px;\">\r\n            <div>\r\n                <span class=\"dialog-hover\">床位号</span>\r\n                <input class=\"dialog-input\" v-model=\"data.number\" placeholder=\"输入\" />\r\n                <el-row style=\"margin: 20px 0;\">\r\n                    <div>\r\n                        <span class=\"dialog-hover\">床位状态</span>\r\n                    </div>\r\n                    <el-switch active-color=\"#13ce66\" inactive-color=\"#ff4949\" v-model=\"data.status\" active-text=\"可用\"\r\n                        inactive-text=\"不可用\">\r\n                    </el-switch>\r\n                </el-row>\r\n            </div>\r\n            <div style=\"display: flex;justify-content: center;align-items: center;\">\r\n                <el-button size=\"small\" v-if=\"!isOperation\"\r\n                    style=\"background-color: rgb(96, 98, 102);color: rgb(247,248,249);border: none;\" class=\"customer\"\r\n                    type=\"info\" @click=\"addOperation()\">新增</el-button>\r\n                <el-button size=\"small\" v-else\r\n                    style=\"background-color: rgb(96, 98, 102);color: rgb(247,248,249);border: none;\" class=\"customer\"\r\n                    type=\"info\" @click=\"updateOperation()\">修改</el-button>\r\n            </div>\r\n        </div>\r\n        <div style=\"display: flex;justify-content: center;align-items: center;margin: 10px;\">\r\n            <el-button style=\"width: 100%;\" v-if=\"beds.length !== 0\" size=\"mini\" type=\"info\"\r\n                @click=\"createBed\">创建床位信息</el-button>\r\n        </div>\r\n\r\n        <div v-if=\"beds.length === 0\">\r\n            <el-empty>\r\n                <el-button type=\"info\" @click=\"createBed\">创建床位信息</el-button>\r\n            </el-empty>\r\n        </div>\r\n        <div v-else style=\"padding: 10px;\">\r\n            <div class=\"bed-item\" v-for=\"(bed, index) in beds\" :key=\"index\">\r\n                <div style=\"font-size: 18px;\">\r\n                    <span style=\"margin-right: 5px;\">\r\n                        <i class=\"el-icon-table-lamp\"></i>\r\n                        床位号：{{ bed.number }}\r\n                    </span>\r\n                    <span>{{ bed.status ? '状态可用' : '状态不可用' }}</span>\r\n                </div>\r\n                <div style=\"margin: 8px 6px;font-size: 12px;\">\r\n                    创建时间：{{ bed.createTime }}\r\n                </div>\r\n                <div>\r\n                    <el-button style=\"margin-right: 10px;\" @click=\"updateBedInfo(bed)\" size=\"mini\" type=\"primary\"\r\n                        icon=\"el-icon-edit\" circle></el-button>\r\n                    <el-popconfirm title=\"确定删除床位信息？\" @confirm=\"deleteBed(bed)\">\r\n                        <el-button slot=\"reference\" size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" circle></el-button>\r\n                    </el-popconfirm>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        roomId: {\r\n            type: Number,\r\n            default: ''\r\n        },\r\n    },\r\n    watch: {\r\n        roomId(v1, v2) {\r\n            console.log(\"房间ID：\" ,v1);\r\n            this.fetchBeds(v1);\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            data: {},\r\n            beds: [],\r\n            bedOperaion: false, // 控制床位新增/编辑的开关变量\r\n            isOperation: false, // false: 新增；true： 修改\r\n        }\r\n    },\r\n    created() {\r\n        this.fetchBeds();\r\n    },\r\n    methods: {\r\n        async deleteBed(bed) {\r\n            let ids = [bed.id]\r\n            const response = await this.$axios.post(`/hotelRoomBed/batchDelete`, ids);\r\n            if (response.data.code === 200) {\r\n                this.cannel();\r\n                this.fetchBeds();\r\n                return;\r\n            }\r\n        },\r\n        createBed() {\r\n            this.data = {};\r\n            this.bedOperaion = true;\r\n        },\r\n        updateBedInfo(bed) {\r\n            this.data = bed;\r\n            this.bedOperaion = true;\r\n            this.isOperation = true;\r\n        },\r\n        // 床位新增\r\n        addOperation() {\r\n            const hotelRoomBed = {\r\n                roomId: this.roomId,\r\n                ...this.data\r\n            }\r\n            this.$axios.post('/hotelRoomBed/save', hotelRoomBed).then(res => {\r\n                if (res.data.code === 200) {\r\n                    // 关闭操作区域\r\n                    this.bedOperaion = false;\r\n                    this.$message.success('床位新增成功');\r\n                    this.fetchBeds();\r\n                }\r\n            }).catch(error => {\r\n                console.error(\"查询床位信息异常:\", error);\r\n\r\n            })\r\n        },\r\n        // 床位修改\r\n        updateOperation() {\r\n            this.$axios.put('/hotelRoomBed/update', this.data).then(res => {\r\n                if (res.data.code === 200) {\r\n                    // 关闭操作区域\r\n                    this.bedOperaion = false;\r\n                    this.isOperation = false;\r\n                    this.$message.success('床位修改成功');\r\n                    this.fetchBeds();\r\n                }\r\n            }).catch(error => {\r\n                console.error(\"查询床位信息异常:\", error);\r\n\r\n            })\r\n        },\r\n        // 取消事件\r\n        cannel() {\r\n            this.data = {};\r\n            this.bedOperaion = false;\r\n            this.isOperation = false;\r\n        },\r\n        // 加载对应的床位信息\r\n        fetchBeds() {\r\n            const hotelRoomBedQueryDto = {\r\n                roomId: this.roomId\r\n            }\r\n            this.$axios.post('/hotelRoomBed/query', hotelRoomBedQueryDto).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.beds = res.data.data;\r\n                }\r\n            }).catch(error => {\r\n                console.error(\"查询床位信息异常:\", error);\r\n\r\n            })\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.bed-item {\r\n    background-color: rgb(248, 248, 248);\r\n    padding: 10px;\r\n    border-radius: 5px;\r\n    margin-bottom: 4px;\r\n}\r\n</style>"]}]}